\chapter*{Крепкие орешки}

\epigraph{Задай  труднейший  из  вопросов!  и  смотри...\\
Ответ  прекрасный  возродится  изнутри!}{---Мавлана Джалал ад-Дин Мухаммад Руми «Радость   при   неожиданном разочаровании»
}

Задачи этого раздела сложны, но ст\'{о}ят потраченных усилий.
Некоторые из них являются вариациями или продолжениями уже рассмотренных задач.

\medskip

Следующая задача была сформулирована
Китом Кёрнесом %K. A. Keаrnes
и Эмилем Киссом.%Emil Kiss
\footnote{Kearnes, Keith A.; Kiss, Emil W. ``Finite algebras of finite complexity.'' \emph{Discrete Math.} 207 (1999), no. 1-3, 89–135.}
Петар Маркович привёз эту задачу на конференцию в честь Даниила Клейтмана, проходивщей в Массачусетском технологическом институте в 1999 году.
Нога Алан, Том Боуман, Рон Хольцман и сам Даниил Клейтман решили её на той же конференции.

Конечно же, и эту задачу ст\'{о}ит попробовать решить самостоятельно, но не стоит расстраиваться, если не получится.

\subsection*{Ящики с подъящиками}

Зафиксируем положительное целое число $n$.
\emph{Ящиком} будем называть декартово произведение $n$ множеств;
если даны $n$ множеств $A_1,\dots,A_n$, то их ящик $A_1{\times}\dots{\times}A_n$ есть множество всех последовательностей $a_1,\dots,a_n$ таких,
что $a_i$ лежит в $A_i$ для каждого~$i$.

Ящик $B_1{\times}\dots{\times}B_n$ называется \emph{подъящиком} $A_1{\times}\dots{\times}A_n$ если $B_i$ является собственным подмножеством $A_i$ для каждого~$i$. %???может строго меньший подъящик???

Возможно ли разбить какой-нибудь ящик на менее чем $2^n$ подъящиков?

\paragraph{Решение:} Найти разбиение на $2^n$ подъящиков легко если конечно каждое множество $A_i$ имеет хотя бы два элемента.
Однако никто не смог обойтись меньшим числом; ниже будет показано, что это сделать невозможно.

Рассмотрим один из сомножителей $A_i$. 
Выберем в нём собственное подмножество $B_i$.
Выберем в $A_i$ случайное подмножество $C_i$ с нечётным числом элементов ($C_i$ может совпасть с $A_i$ если $|A_i|$ нечётно).

Заметим, что вероятность того, что $|C_i\cap B_i|$ нечётно равна $\tfrac12$.
Действительно, 
$C_i$ можно получить выбирая элементы $A_i$ по порядку так, чтобы предпоследний элемент лежал в $B_i$, а последний в его дополнении $A_i\backslash B_i$.
Каждый раз решение можно принимать подбрасывая монетку и только последний элемент следует выбрать так чтобы число $|C_i|$ получилось нечётным.
В этом случае последний бросок монеты определяет чётность $|C_i\cap B_i|$.

Заметим, что ящик $C=C_1{\times}\dots{\times}C_n$ имеет нечётный размер тогда и только тогда, когда $|C_i|$ нечётно для каждого~$i$.
Пусть $C=C_1{\times}\dots{\times}C_n$ есть случайный ящик нечётного размера в $A$, то есть $C_i\subset A_i$ для каждого~$i$.
В этом случае вероятность того, что данный подъящик $B=B_1{\times}\dots{\times}B_n$ пересекается с $C$ по нечётному числу элементов равна $\tfrac1{2^n}$. %???

Предположим теперь, что существует разбиение на менее чем $2^n$ подъящиков $B(1),\dots,B(m)$.
Заметим, что вероятность того, что $C$ пересекается с каждым подъящиком $B(i)$ по чётному числу элементов положительна (она не меньше чем $1-\tfrac{m}{2^n}$),
но это невозможно, поскольку $C$ содержит нечётное число элементов.
\heart

Для отважных сердец, что всё ещё с нами, мы предлагаем больше таких задач.
Начнём с задачи Сары Робинсон, которая попала в «Нью-Йорк таймс».\footnote{The New York Times: ``Why Mathematicians Now Care about their Hat Color,'' by Sara Robinson, April 10, 2001.}

\subsection*{Отгадать цвет шляп}

Команда шляпников вернулась.

На этот раз цвет шляпы каждого игрока определяется подбрасыванием монеты.
Игроки становятся в круг так чтобы видеть цвета шляп остальных, никакого общения не допускается.
Далее игроков отводят в сторону и предоставляют шанс отгадать цвет своей шляпы --- он может быть синим или красным;
но им также предоставляется право \emph{молчать}.

Развязка ужасна: если все молчали или хотя бы один назвал неверный цвет, то всех игроков казнят.
Может показаться, что лучшей стратегией будет молчать всем, кроме одного, в этом случае шансы выжить будут $50\%$.
Но, поразительным образом, 16 игроков могут добиться выживания в более чем $90\%$ случаев. %???15
Как это сделать?

Если вам кажется, что улучшить шансы в $50\%$ невозможно, то скорее всего вы правильно поняли условие задачи.
Но прежде чем отчаиваться, попробуйте случай трёх игроков.

\medskip 

Решение следующей задачи неожиданно связано с решением предыдущей.
Далее подсказок не ждите.

\subsection*{Пятнадцать битов и шпионка}

Каждый день шпионка имеет доступ к 15 битам на местной радиостанции.
Она не знает, как выбираются биты, но каждый день у неё есть возможность \emph{подменить} любой из них, поменяв его с 0 на 1 или наоборот.
После этого биты идут в эфир. 
Это единственный канал общения шпионки с центром.

Сколько информации она может передать за день?

\subsection*{Углы в пространстве}

Докажите, что среди любого множества из более чем $2^n$ точек в $\mathbb{R}^n$, найдутся три, которые определяют тупой угол.

\subsection*{Два монаха на горе}

Помните монаха из Главы 5 (Геометрия), который забрался на Фудзияму в понедельник, а спустился во вторник?
На этот раз он вместе с собратом-монахом поднимается на гору в один и тот же день, начиная одновременно с одной высоты, но по разным тропам.
По пути к вершине их тропы могут идти вверх и вниз, но не опускаются ниже стартовой высоты.

Требуется доказать, что монахи могут изменять свои скорости (возможно идя назад) так, чтобы в \emph{каждый} момент дня они находились бы на одной высоте!

\subsection*{Сумма под контролем}

Дан список из $n$ вещественных чисел $x_1,\dots,x_n$ из отрезка $[0,1]$.
Докажите, что можно найти числа $y_1,\dots,y_n$ такие, что для любого $k$ выполняется $|y_k|=x_k$ и
\[\left|\sum_{i=1}^ky_i-\sum_{i=k+1}^ny_i\right|\le 2.\]

\subsection*{Двухламповая комната}%???Две лампы у следователя

Вы помните заключённых и комнату с одной лампой?
Теперь снова каждого из $n$ заключенных будут вызывать по одиночке на допрос, бесконечное число раз и в произвольном порядке, определяемом их тюремщиком.
Однако на этот раз в комнате для допроса есть \emph{две} лампы, каждая со своим бинарным переключателем.
Средств связи, кроме этих выключателей нет, и начальные состояния их неизвестны.
У заключенных снова есть возможность договориться заранее.

Опять же, требуется, чтобы один из заключенных в какой-то момент смог сделать вывод, что допросили всех.
Вы говорите, что это \emph{уже} сделано с \emph{одним} переключателем.
Да, но на этот раз требуется, чтобы все заключённые получили одинаковые инструкции.

\subsection*{Площадь и диаметр}

Докажите, что среди всех плоских фигур единичного диаметра, круг имеет наибольшую площадь.

\subsection*{Разрез пополам}
Докажите, что из каждого набора из $2n$ целых чисел, можно выбрать $n$ чисел, сумма которых делится на $n$.

\subsection*{Салфетки при случайном рассаживании}

Помните задачу про банкет, там, где куча математиков рассаживается за большой круглый стол?
И снова, на столе, между каждой парой приборов, находится кофейная чашка с салфеткой.
Каждый человек, садясь, берёт салфетку слева или справа;
если обе в наличии, то он выбирает её случайным образом.

На этот раз метрдотеля нет; места занимаются в случайном порядке.
Предполагая, что число математиков велико, какая их доля (асимптотически) останется без салфеток?

\subsection*{Группа солдат в поле}

Возможно, вы также помните солдат в поле, каждый из них присматривал за ближайшим соседом.
Предположим, есть большое количество солдат, в случайных позициях в большом квадрате, и они разбиты на максимально возможное число групп таких, что солдаты присматривают только внутри групп.

Чему равен средний размер группы?

\subsection*{Игреки на плоскости}

Вам уже известно, что на плоскости нет несчётного числа непересекающихся топологических восьмёрок.
Конечно же, можно найти континуум отрезков и окружностей.
Закономерный вопрос: что можно сказать про игреки, то есть про подмножества топологически эквивалентные трём отрезкам с общим концом?

Докажите, что на плоскости можно нарисовать только счётное число непересекающихся игреков.

\subsection*{Снова намагниченные доллары}

В последней задаче мы возвращаемся к намагниченным долларам, но слегка увеличиваем их притяжение.
На этот раз бесконечная последовательность монет сыпется в две урны.
Когда одна урна содержит $x$ монет, а другая $y$, следующая монета попадет в первую урну с вероятностью $x^{1{,}01}/(x^{1{,}01}+y^{1{,}01})$, а иначе во вторую.

Докажите, что с какого-то момента одна из урн не получит ни одной монеты.
