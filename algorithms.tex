\chapter*{Алгоритмы}

%Achievement is largely the product of steadily raising one’s level of aspiration and expectation.
%Jack Nicklaus (1940 --) “My Story”

%\epigraph{Успех в значительной степени является результатом неуклонного возрастания (повышения уровня) ваших устремлений и надежд (ожиданий).}{---Джек Никлаус (1940---) «Моя история»}

\epigraph{По большей части успех есть результат неуклонного повышения уровня запросов и ожиданий.}{---Джек Никлаус (1940---) «Моя история»}

Множество очаровательных математических задач закручены вокруг алгоритмов.
Обычно вам (жертвам) предлагается некая ситуация вместе с набором возможных операций и искомое (целевое) состояние.
Вы можете или не можете выбирать, как применять эти операции.
Вас спросят «Возможно ли достичь искомого состояния?» или, например «А возможно ли избежать искомого состояния?» или, иногда «За сколько шагов?».

Как правило, при выполнении операции какой-то аспект меняется в лучшую сторону, но при этом, возможно, теряются позиции где-то в другом месте.
Как определить, что достижима ли цель?

Рассмотрим следующую задачу, взятую из первой Всероссийской Математической олимпиады 1961 года.

\subsection*{Знаки в таблице}% (SIGNS IN AN ARRAY)

Предположим, вам дана таблица $m\times n$, в клетки которой вписаны вещественные числа, и вам разрешается одновременно менять знак у всех чисел некоторой строки или некоторого столбца.
Докажите, что можно поменять знаки таким образом, что суммы чисел, стоящих в любой строке и любом столбце, неотрицательны.

\paragraph{Решение:}
Поменяв знаки в строке с отрицательной суммой, мы выправим данную сумму, но, возможно, испортим сумму в каком-то столбце.
Как же можно убедиться, что мы улучшили позицию?

Данная задача соответствует первому из следующих классических типов задач.
В задаче с алгоритмами вам обычно предлагается текущая ситуация, искомое положение и набор операций, которые вы можете использовать, чтобы улучшить ситуацию.
Требуется доказать одно из следующих утверждений (но необязательно говорят, которое):
\begin{figure}
\centering
\includegraphics[scale=0.6]{Figs/Algorithms/array}
\end{figure}
\begin{enumerate}[(1)]
\item Существует (конечная) последовательность операций, которая приведёт к искомому положению.
\item Любая последовательность операций в конечном итоге достигнет искомого положения.
\item Каждая последовательность операций достигает цели за одинаковое число шагов.
\item Никакая последовательность операций не может достичь цели.
\end{enumerate}

Вашей целью в алгоритмической задаче должно быть нахождение такого параметра $P$ --- некоего числового показателя состояний --- который каким-либо образом закрепляет прогресс продвижения к искомому состоянию.

Для доказательства (1) вам нужно показать, что до того, как вы достигнете искомого состояния, всегда будет существовать операция (или последовательность операций), улучшающая $P$.
Чтобы наверняка не попасть в ловушку парадокса Зенона (делая шаги всё меньше и меньше, и никогда не достигая цели), возможно, вам придётся доказать, что $P$ можно всегда улучшить, по крайней мере, на некоторую величину, или что существует только конечное число возможных ситуаций.

Для доказательства (2) вы делаете то же самое, кроме того, что показываете, что каждый выбор набора операций улучшает $P$.

Чтобы доказать (3), вы показываете, что каждая операция улучшает $P$ на одну и ту же величину.

Чтобы доказать (4), вы показываете, что не существует операции, улучшающей $P$, а для достижения цели требуется улучшение.

\smallskip

Вернёмся теперь к задаче с таблицей.
Мы видим, что число линий (строк и столбцов) с неотрицательной суммой --- неправильный параметр.
Это число может уменьшаться даже тогда, когда линия с отрицательной суммой поменяла знак.
Вместо этого попробуем придать $P$ значение суммы всех чисел в таблице.
Перевернув строку с суммой $-s$, $P$ увеличивается на $2s$, так как $P$ можно записать как сумму сумм всех строк (аналогично для столбцов).
Поскольку имеется только конечное число достижимых ситуаций
(а именно, не более, чем $2^{m+n}$), и $P$ растёт каждый раз, когда переворачивается линия с отрицательной суммой, то должен настать момент, когда все суммы линий неотрицательны.

Эта задача типа (1), но, нужно отметить,что она также может быть переформулирована как задача типа (2), добавив условие, что можно переворачивать только линии с отрицательными суммами, а затем требуя доказать, что вы достигнете такого момента, когда все суммы линий неотрицательны.

\medskip

Задачи, приведённые ниже, могут потребовать значительно больше воображения для отыскания параметра $P$.

\subsection*{Инфекция на шахматной доске}% (THE INFECTED CHECKBOARD)

Инфекция распространяется по клеткам шахматной доски $n \times n$ следующим образом: если у клетки два или более инфицированных соседа, то она заражается инфекцией.
(Соседями считаются только клетки с общей стороной, так что у каждой клетки имеется максимум четыре соседа.)

\begin{figure}
\centering
\includegraphics[scale=0.6]{Figs/Algorithms/diag}
\end{figure}

Предположим, например, что все $n$ клеток на главной диагонали инфицированы.
Тогда инфекция распространится на соседние диагонали и в итоге на всю доску.

Докажите, что нельзя заразить всю шахматную доску, если начальное число инфицированных клеток меньше $n$?

\subsection*{Пустое ведро}% (EMPTYING A BUCKET)

У вас имеются три больших ведра, в каждом налито целое число унций неиспаряющейся жидкости.
В любой момент вы можете удвоить объём жидкости в одном из вёдер, долив туда из ведра с б\'{о}льшим объёмом жидкости.
Другими словами, вам разрешается переливать из ведра, содержащего $x$ унций жидкости в ведро, содержащее 
$y\le x$ унций, до тех пор, пока там не станет $2y$ унций (а в первом ведре останется $x-y$).

\begin{figure}[h!]
\centering
\includegraphics[scale=0.6]{Figs/Algorithms/buckets}
\end{figure}
%???en>ru

Докажите, что независимо от начального состояния, вы сможете вылить всю жидкость из одного из вёдер.

\subsection*{Фишки по углам}% (PEGS ON THE CORNERS)

Четыре фишки начинают ходить с углов некоего квадрата на плоскости.
В любой момент одна фишка может перепрыгнуть через другую,
встав на том же расстоянии с противоположной стороны.
Фишка, через которую перепрыгнули, остаётся на месте.
Можете ли вы передвинуть все фишки так, чтобы они оказались в углах б\'{о}льшего квадрата?

\subsection*{Фишки на полуплоскости}% (PEGS ON THE HALF-PLANE)

На оси $X$ или ниже в каждой вершине решётки на $XY$-плоскости стоит одна фишка.
В любой момент фишка может перепрыгнуть через соседнюю фишку (по горизонтали, вертикали или диагонали) и встать на следующую вершину решётки, при условии, что она не занята.
При этом фишка, через которую перепрыгнули, снимается с поля.

\begin{figure}[h!]
\centering
\includegraphics[scale=0.6]{Figs/Algorithms/pegs}
\end{figure}

Может ли фишка продвинуться произвольно далеко наверх от оси $X$?

\subsection*{Фишки на квадрате}% (PEGS IN A SQUARE)

И снова, фишки расположены в вершинах решётки на плоскости, только в этот раз в квадрате $n\times n$.
В данной задаче фишки могут прыгать только по горизонтали или вертикали, и фишка, через которую перепрыгнули, убирается с поля.
Цель задачи --- уменьшить число фишек от $n^2$ до $1$.

Докажите, что в случае, когда $n$ кратно $3$, этого сделать нельзя!

\subsection*{Кульбиты многоугольника}% (FLIPPING THE POLYGON)

Вершины многоугольника обозначены числами, сумма которых положительна.
Вы можете в любой момент поменять знак у вершины с отрицательным числом, но тогда новое значение вычитается из обеих чисел, обозначающих соседние вершины, так чтобы сумма оставалась постоянной.

\begin{figure}[h!]
\centering
\includegraphics[scale=0.6]{Figs/Algorithms/pent}
\end{figure}

Докажите, что вне зависимости от того, какие числа меняли знак, после конечного числа изменений все числа окажутся положительными, и таким образом процесс прекратится.

\subsection*{Лампочки по кругу}% (LIGHT BULBS IN A CIRCLE)

Лампочки соедины по кругу и пронумерованы от $1$ до $n$, все изначально включены.
В момент времени $t$ вы смотрите на лампочку $t$, и если она включена, вы меняете состояние у лампочки $t + 1 \pmod{n}$ следующим образом: вы выключаете её, если она включена, и включаете, если она выключена.
Если лампочка $t$ выключена, то вы ничего не делаете.

Докажите, что если ходить и ходить по кругу подобным образом, то в конце концов наступит момент, когда все лампочки снова будут включены.

\subsection*{Жуки на многограннике}% (BUGS ON A POLYHEDRON)

На каждой грани выпуклого многогранника живёт по жуку.
Жуки ползают по периметру своей грани с разными скоростями, но только по часовой стрелке.
Докажите, что нельзя создать такое расписание, чтобы жуки могли обойти свою грань и вернуться к начальной точке, ни с кем не столкнувшись.

\subsection*{Жуки на числовом луче}% (BUGS ON THE LINE)

Каждое положительное целое число на числовом луче оснащено зелёной, жёлтой или красной лампочкой.
Жук ставится на «1» и он всегда подчиняется следующим правилам: если он видит зелёный свет, он переключает его на жёлтый и передвигается на один шаг вправо; 
если он видит жёлтый свет, он переключает его на красный и передвигается на один шаг вправо; 
если он видит красный свет, он переключает его на зелёный и передвигается на один шаг влево.

В конце концов, жук либо свалится с левого конца луча, либо убежит на бесконечность вправо.
Затем второй жук ставится на «1», затем третий.

Докажите, что если второй жук свалился с луча слева, то третий жук уйдёт вправо на бесконечность.

\subsection*{Как разломать шоколадку}% (BREAKING A CHOCOLATE BAR)

У вас есть шоколадка из $m\times n$ долек, и вам надо разломать её на эти составные дольки.
За один шаг вы можете взять один кусок и разломить его по вертикальной или горизонтальной линии.

Докажите, что какой бы вы метод ни выбрали, вы разломаете шоколадку за одинаковое число шагов.

\begin{figure}[h!]
\centering
\includegraphics[scale=0.5]{Figs/Algorithms/bar}
\end{figure}
